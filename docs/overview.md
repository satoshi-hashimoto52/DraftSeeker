# 概要

CAD 図面画像のアノテーション作成を高速化するための支援ツールです。  
YOLO 学習に必要な bbox / seg を、テンプレ照合と SAM を組み合わせて効率的に生成します。

## なぜ必要か（YOLO 学習前段の課題）

図面画像では手動アノテのコストが高く、以下がボトルネックになります。

- 類似図形が多く、目視での拾い上げが遅い
- 図面ごとに縮尺が異なり、単一テンプレでは検出が不安定
- 注記や寸法線が密集し、正確なセグメンテーションが難しい

## 図面画像特有の問題

- 細い線の重なりで輪郭が破綻しやすい
- 同一クラスでも見た目が微妙に異なる（縮尺・省略表記）
- 注記文字や寸法線は学習対象外だが画面内に多数存在

## なぜ「テンプレ × SAM × フォールバック」か

- テンプレ照合: クリック点中心の近傍で高精度・高速に候補を出せる
- SAM: 必要な候補だけ精密に seg を作れる
- フォールバック: SAMが使えない環境でも最低限の輪郭を返せる

この組み合わせにより「高速・安定・再現性」のバランスを取っています。

## SAM をオンデマンド実行にする理由

- 常時実行はコストが高く、UI体験が悪化
- MPS/CPU環境で安定性に差が出るため、必要時のみ呼ぶ
- テンプレ候補の精度が高い場合は SAM なしで十分なケースが多い
